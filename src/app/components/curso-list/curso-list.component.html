<!-- curso-list.component.html - Versión corregida -->
<div class="curso-list-container">
  
  <!-- Header con estadísticas -->
  <header class="catalog-header">
    <div class="header-content">
      <h2 class="catalog-title">Catálogo de Cursos</h2>
      <div class="catalog-stats">
        <span class="stats-badge" *ngIf="!isLoading()">
          <i class="icon-courses"></i>
          {{ cursosCount() }} {{ cursosCount() === 1 ? 'curso disponible' : 'cursos disponibles' }}
        </span>
        <button 
          class="refresh-btn" 
          (click)="onRefresh()"
          [disabled]="isLoading()"
          title="Actualizar lista">
          <i class="icon-refresh" [class.spinning]="isLoading()"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading()">
    <div class="loading-spinner"></div>
    <p class="loading-text">Cargando cursos...</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="hasError()">
    <div class="error-card">
      <i class="icon-error"></i>
      <h3>Ups, algo salió mal</h3>
      <p>{{ errorMessage() }}</p>
      <button class="retry-btn" (click)="onRefresh()">
        <i class="icon-retry"></i>
        Intentar nuevamente
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-container" *ngIf="isEmpty()">
    <div class="empty-card">
      <i class="icon-empty"></i>
      <h3>No hay cursos disponibles</h3>
      <p>Sé el primero en crear un curso y compartir tu conocimiento</p>
      <button class="create-btn" routerLink="/curso/create">
        <i class="icon-add"></i>
        Crear mi primer curso
      </button>
    </div>
  </div>
 
  <!-- Curso Grid -->
  <div class="curso-grid" *ngIf="!isLoading() && !hasError() && !isEmpty()">
    <ng-container *ngIf="authState$ | async as authState">
      <ng-container *ngFor="let curso of cursos(); trackBy: trackByCurso">
        
        <!-- Vista para usuarios autenticados -->
        <!-- CORRECCIÓN: Pasar el objeto user completo sin transformación -->
        <app-curso-card-private 
          *ngIf="authState.user"
          [curso]="curso"
          [currentUserId]="authState.user.id"
          (edit)="onEdit($event)"
          (delete)="onDelete($event)"
          (exchange)="onExchange($event)"
          class="curso-card-wrapper">
        </app-curso-card-private>
        
        <!-- Vista para visitantes -->
        <app-curso-card-public 
          *ngIf="!authState.user"
          [curso]="curso"
          (viewDetails)="openLoginPrompt()"
          class="curso-card-wrapper">
        </app-curso-card-public>

      </ng-container>
    </ng-container>
  </div>

  <!-- Footer con información adicional -->
  <footer class="catalog-footer" *ngIf="!isEmpty() && !isLoading()">
    <p class="footer-text">
      ¿No encuentras lo que buscas? 
      <a routerLink="/cursos/sugerir" class="footer-link">Sugiere un curso</a>
    </p>
  </footer>

</div>